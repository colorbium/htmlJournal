<html>
  <head>

    <title>Journal WIP</title>
    <link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="Sortable.js"></script>
 <script type="text/javascript" src="filer.js"></script>
    <script type="text/javascript" src="drawtools.js"></script>
  </head>
  <body onload="init(); freeDraw()">
	
    <div id="page" width="200px;" height="200px;"></div>
	<div id="layers">
		<ul  id="layerlist">
		
		</ul>
		<button id="newlayer">Add</button>
	</div>
	<script>
	var nl_btn = document.getElementById('newlayer');
	nl_btn.addEventListener("click", addLayer, false);
	var list = document.getElementById('layerlist');
	var sortable = Sortable.create(list,{
		filter: '.js-remove',
		onFilter: function(evt){
			var el = sortable.closest(evt.item);
			el && el.parentNode.removeChild(el);
		},
		onMove: function(evt){
			//move canvas
			//update z index
			var list = document.getElementById("layers").getElementsByTagName("li");
			for(i = list.length-1; i>=0; i--)
			{
				var num = list[i].id;
				var canvas = document.getElementById("canvas" + num.toString());
				canvas.currentStyle["zIndex"] = i;
			}
			//update layers.txt
			updateLog();
		}	
		});
	</script>
    <div id="controls">
      <button id="prev">Previous</button>
      <button id="next">Next</button>
	    <button onclick="setRed()">Red</button>
	<button onclick="setBlack()">Black</button>
    </div>
  </body>
</html>
